<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>PointCloud Motion Capture: src/motion_capture.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">PointCloud Motion Capture
   </div>
   <div id="projectbrief">Pointcloud Motion Capture is a ROS 2 package designed to process point clouds for capturing object movements. It detects objects using color filters and infers data about their position, velocity, and acceleration. This package has been tested under [ROS] Humble and Ubuntu 22.04</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="headertitle"><div class="title">motion_capture.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="motion__capture_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright 2024 Jo√£o Vitor Silva Mendes</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span> </div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="preprocessor">#include &quot;<a class="code" href="motion__capture_8hpp.html">motion_capture.hpp</a>&quot;</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespacepointcloud__motion__capture.html">pointcloud_motion_capture</a></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span>{</div>
<div class="foldopen" id="foldopen00007" data-start="{" data-end="}">
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#a9b7ffa90ac8882c566dd9c521b2b1070">    7</a></span><a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a9b7ffa90ac8882c566dd9c521b2b1070">MotionCapture::MotionCapture</a>()</div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span>: Node(<span class="stringliteral">&quot;motion_capture&quot;</span>),</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span>  previous_position_(Eigen::Vector4f::Zero()),</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span>  previous_velocity_(Eigen::Vector3f::Zero()),</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>  previous_time_(this-&gt;now()), previous_velocity_time_(this-&gt;now())</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>{</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>  <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3e0e82805977a578a2bea53288f5b090">loadParameters</a>();</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span> </div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#aab8b9ff1f06f0e30501b18443cf94855">subscription_</a> = this-&gt;create_subscription&lt;sensor_msgs::msg::PointCloud2&gt;(</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a83587013c54be37ae783180721f0dd5d">point_cloud_topic_filtered_</a>, <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a9d9bc3768aabdbdeb780a633fff1cb9f">queue_size_</a>,</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>    std::bind(&amp;<a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#ac109216a317d096c5dd2d389eef92acd">MotionCapture::pointCloudCallback</a>, <span class="keyword">this</span>, std::placeholders::_1));</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span> </div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#addbe00e8824bbd08761ca68fc5aac006">position_publisher_</a> = this-&gt;create_publisher&lt;geometry_msgs::msg::Point&gt;(</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#afa859cac2d5662a15854e39dd71daa31">position_publish_topic_</a>, <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a9d9bc3768aabdbdeb780a633fff1cb9f">queue_size_</a>);</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a7bdd1f0524f719f2b691defd6f991a62">velocity_publisher_</a> = this-&gt;create_publisher&lt;geometry_msgs::msg::Vector3&gt;(</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#ad4a80fc0fb35c65ea8007a03c0f4436f">velocity_publish_topic_</a>, <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a9d9bc3768aabdbdeb780a633fff1cb9f">queue_size_</a>);</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a0a914ca05320a147adaa0f94b618ad85">acceleration_publisher_</a> = this-&gt;create_publisher&lt;geometry_msgs::msg::Vector3&gt;(</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a34021deb2f89da260e041ceeaefbd351">acceleration_publish_topic_</a>, <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a9d9bc3768aabdbdeb780a633fff1cb9f">queue_size_</a>);</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#aa156ae74a1cb0a67619d053bfda6c5f4">timer_</a> = this-&gt;create_wall_timer(</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    std::chrono::milliseconds(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a8f0c9d738a031e76171294b2135495f9">kMillisecondsPerSecond</a> / <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#afac01981dea1d1d977ff43c79d578256">publish_rate_</a>)),</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span>    std::bind(&amp;<a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a15fd3009fde1a138b8a91025599d4afe">MotionCapture::publishData</a>, <span class="keyword">this</span>));</div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>  RCLCPP_INFO(this-&gt;get_logger(), <span class="stringliteral">&quot;MotionCapture node initialized.&quot;</span>);</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>}</div>
</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="foldopen" id="foldopen00035" data-start="{" data-end="}">
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3e0e82805977a578a2bea53288f5b090">   35</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3e0e82805977a578a2bea53288f5b090">MotionCapture::loadParameters</a>()</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>{</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>  this-&gt;declare_parameter&lt;std::string&gt;(</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>    <span class="stringliteral">&quot;point_cloud_topic_filtered&quot;</span>,</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3039930579e2cccb2b12f0a2abab7dd4">kDefaultPointCloudTopicFiltered</a>);</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>  this-&gt;declare_parameter&lt;std::string&gt;(<span class="stringliteral">&quot;position_publish_topic&quot;</span>, <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a6f6f28c357e7fe079ae84589a05b41f0">kDefaultPositionPublishTopic</a>);</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>  this-&gt;declare_parameter&lt;std::string&gt;(<span class="stringliteral">&quot;velocity_publish_topic&quot;</span>, <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a965bf294d864a6f52279de513dfbde89">kDefaultVelocityPublishTopic</a>);</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>  this-&gt;declare_parameter&lt;std::string&gt;(</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <span class="stringliteral">&quot;acceleration_publish_topic&quot;</span>,</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a57223726dc7083da222481f61b37c67e">kDefaultAccelerationPublishTopic</a>);</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>  this-&gt;declare_parameter&lt;int&gt;(<span class="stringliteral">&quot;position_samples&quot;</span>, <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a4608c26b091de86a8fefb2533901b123">kDefaultPositionSamples</a>);</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>  this-&gt;declare_parameter&lt;int&gt;(<span class="stringliteral">&quot;velocity_samples&quot;</span>, <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a5adde86119e6d10e0c0a7f7eb9e05972">kDefaultVelocitySamples</a>);</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>  this-&gt;declare_parameter&lt;double&gt;(<span class="stringliteral">&quot;publish_rate&quot;</span>, <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a2685af73193d4a59c9680c78fc7fb04b">kDefaultPublishRate</a>);</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>  this-&gt;declare_parameter&lt;int&gt;(<span class="stringliteral">&quot;queue_size&quot;</span>, <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a289fc6441569350a18ab9f523e390d14">kDefaultQueueSize</a>);</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a83587013c54be37ae783180721f0dd5d">point_cloud_topic_filtered_</a> = this-&gt;get_parameter(<span class="stringliteral">&quot;point_cloud_topic_filtered&quot;</span>).as_string();</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#afa859cac2d5662a15854e39dd71daa31">position_publish_topic_</a> = this-&gt;get_parameter(<span class="stringliteral">&quot;position_publish_topic&quot;</span>).as_string();</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#ad4a80fc0fb35c65ea8007a03c0f4436f">velocity_publish_topic_</a> = this-&gt;get_parameter(<span class="stringliteral">&quot;velocity_publish_topic&quot;</span>).as_string();</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a34021deb2f89da260e041ceeaefbd351">acceleration_publish_topic_</a> = this-&gt;get_parameter(<span class="stringliteral">&quot;acceleration_publish_topic&quot;</span>).as_string();</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a74a3e808b2f3c778be89d8a65f142ecd">position_samples_</a> = this-&gt;get_parameter(<span class="stringliteral">&quot;position_samples&quot;</span>).as_int();</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a6f32acfa4286aed5ec45f34d34a76dbb">velocity_samples_</a> = this-&gt;get_parameter(<span class="stringliteral">&quot;velocity_samples&quot;</span>).as_int();</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#afac01981dea1d1d977ff43c79d578256">publish_rate_</a> = this-&gt;get_parameter(<span class="stringliteral">&quot;publish_rate&quot;</span>).as_double();</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a9d9bc3768aabdbdeb780a633fff1cb9f">queue_size_</a> = this-&gt;get_parameter(<span class="stringliteral">&quot;queue_size&quot;</span>).as_int();</div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>}</div>
</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span> </div>
<div class="foldopen" id="foldopen00059" data-start="{" data-end="}">
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#ac109216a317d096c5dd2d389eef92acd">   59</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#ac109216a317d096c5dd2d389eef92acd">MotionCapture::pointCloudCallback</a>(<span class="keyword">const</span> sensor_msgs::msg::PointCloud2::SharedPtr msg)</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>{</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>  pcl::PointCloud&lt;pcl::PointXYZRGB&gt;::Ptr cloud(<span class="keyword">new</span> pcl::PointCloud&lt;pcl::PointXYZRGB&gt;);</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>  pcl::fromROSMsg(*msg, *cloud);</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>  Eigen::Vector4f centroid;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>  pcl::compute3DCentroid(*cloud, centroid);</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>  <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a334bd4d37cca9734ed03556a954db329">updatePositionSamples</a>(centroid);</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>}</div>
</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="foldopen" id="foldopen00070" data-start="{" data-end="}">
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#a334bd4d37cca9734ed03556a954db329">   70</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a334bd4d37cca9734ed03556a954db329">MotionCapture::updatePositionSamples</a>(<span class="keyword">const</span> Eigen::Vector4f &amp; centroid)</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>{</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>  <span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a438d48c23be783174910509035222d58">position_queue_</a>.size()) &gt;= <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a74a3e808b2f3c778be89d8a65f142ecd">position_samples_</a>) {</div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a438d48c23be783174910509035222d58">position_queue_</a>.pop();</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>  }</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a438d48c23be783174910509035222d58">position_queue_</a>.push(centroid);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>}</div>
</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span> </div>
<div class="foldopen" id="foldopen00078" data-start="{" data-end="}">
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#a30075cd00e1c61ba5fc1f96fd6819dcf">   78</a></span>Eigen::Vector4f <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a30075cd00e1c61ba5fc1f96fd6819dcf">MotionCapture::getFilteredPosition</a>()</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>{</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>  Eigen::Vector4f sum = Eigen::Vector4f::Zero();</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>  std::queue&lt;Eigen::Vector4f&gt; temp_queue = <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a438d48c23be783174910509035222d58">position_queue_</a>;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>  <span class="keywordflow">while</span> (!temp_queue.empty()) {</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    sum += temp_queue.front();</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>    temp_queue.pop();</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>  }</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  <span class="keywordflow">return</span> sum / <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a438d48c23be783174910509035222d58">position_queue_</a>.size();</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>}</div>
</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="foldopen" id="foldopen00089" data-start="{" data-end="}">
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#acaa6339a9724ea4388a727b4eb781cc4">   89</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#acaa6339a9724ea4388a727b4eb781cc4">MotionCapture::updateVelocitySamples</a>(<span class="keyword">const</span> Eigen::Vector3f &amp; velocity)</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>{</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>  <span class="keywordflow">if</span> (<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a58eb72dd9ed496d2db4ecf12102cf3cc">velocity_queue_</a>.size()) &gt;= <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a6f32acfa4286aed5ec45f34d34a76dbb">velocity_samples_</a>) {</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a58eb72dd9ed496d2db4ecf12102cf3cc">velocity_queue_</a>.pop();</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>  }</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a58eb72dd9ed496d2db4ecf12102cf3cc">velocity_queue_</a>.push(velocity);</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>}</div>
</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span> </div>
<div class="foldopen" id="foldopen00097" data-start="{" data-end="}">
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#a667866c7b1c0a80114ae91ed570137e7">   97</a></span>Eigen::Vector3f <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a667866c7b1c0a80114ae91ed570137e7">MotionCapture::getFilteredVelocity</a>()</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>{</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>  Eigen::Vector3f sum = Eigen::Vector3f::Zero();</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>  std::queue&lt;Eigen::Vector3f&gt; temp_queue = <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a58eb72dd9ed496d2db4ecf12102cf3cc">velocity_queue_</a>;</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>  <span class="keywordflow">while</span> (!temp_queue.empty()) {</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>    sum += temp_queue.front();</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>    temp_queue.pop();</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>  }</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>  <span class="keywordflow">return</span> sum / <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a58eb72dd9ed496d2db4ecf12102cf3cc">velocity_queue_</a>.size();</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>}</div>
</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span> </div>
<div class="foldopen" id="foldopen00108" data-start="{" data-end="}">
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#a15fd3009fde1a138b8a91025599d4afe">  108</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a15fd3009fde1a138b8a91025599d4afe">MotionCapture::publishData</a>()</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>{</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>  <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a438d48c23be783174910509035222d58">position_queue_</a>.empty()) {</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>    Eigen::Vector4f filtered_position = <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a30075cd00e1c61ba5fc1f96fd6819dcf">getFilteredPosition</a>();</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#ac2e4ce6f0eca5b0cd98b2c93626eb5aa">publishPosition</a>(filtered_position);</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    Eigen::Vector3f current_velocity = <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a4bc83af20b6877a846c1f47c884ff93c">publishVelocity</a>(filtered_position);</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#acaa6339a9724ea4388a727b4eb781cc4">updateVelocitySamples</a>(current_velocity);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span> </div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a58eb72dd9ed496d2db4ecf12102cf3cc">velocity_queue_</a>.empty()) {</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>      Eigen::Vector3f filtered_velocity = <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a667866c7b1c0a80114ae91ed570137e7">getFilteredVelocity</a>();</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>      <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#acf3041877a30d1926830ab3c0c0a4875">publishAcceleration</a>(filtered_velocity);</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    }</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span> </div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a30f0d3aa61f2ee048dfdddefbe8e2d5d">previous_position_</a> = filtered_position;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a438497c4ec863c366bd036b14a088796">previous_time_</a> = this-&gt;now();</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>  }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>}</div>
</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="foldopen" id="foldopen00127" data-start="{" data-end="}">
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#ac2e4ce6f0eca5b0cd98b2c93626eb5aa">  127</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#ac2e4ce6f0eca5b0cd98b2c93626eb5aa">MotionCapture::publishPosition</a>(<span class="keyword">const</span> Eigen::Vector4f &amp; centroid)</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>{</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>  geometry_msgs::msg::Point position_msg;</div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>  position_msg.x = centroid[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa6e984a9901ecd8d15182651fdb407e46">kCentroidX</a>];</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>  position_msg.y = centroid[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa14dee094aab682b8da5d7b72ee0d70c8">kCentroidY</a>];</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>  position_msg.z = centroid[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0facfb2abd18c5d782f66e969cd3f15fa72">kCentroidZ</a>];</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#addbe00e8824bbd08761ca68fc5aac006">position_publisher_</a>-&gt;publish(position_msg);</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>}</div>
</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span> </div>
<div class="foldopen" id="foldopen00137" data-start="{" data-end="}">
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#a4bc83af20b6877a846c1f47c884ff93c">  137</a></span>Eigen::Vector3f <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#a4bc83af20b6877a846c1f47c884ff93c">MotionCapture::publishVelocity</a>(<span class="keyword">const</span> Eigen::Vector4f &amp; current_position)</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>{</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>  rclcpp::Time current_time = this-&gt;now();</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>  <span class="keywordtype">double</span> time_difference = (current_time - <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a438497c4ec863c366bd036b14a088796">previous_time_</a>).seconds();</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>  Eigen::Vector3f velocity = Eigen::Vector3f::Zero();</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span> </div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>  <span class="keywordflow">if</span> (time_difference &gt; 0) {</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>    velocity[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa6e984a9901ecd8d15182651fdb407e46">kCentroidX</a>] = (current_position[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa6e984a9901ecd8d15182651fdb407e46">kCentroidX</a>] - <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a30f0d3aa61f2ee048dfdddefbe8e2d5d">previous_position_</a>[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa6e984a9901ecd8d15182651fdb407e46">kCentroidX</a>]) /</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>      time_difference;</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    velocity[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa14dee094aab682b8da5d7b72ee0d70c8">kCentroidY</a>] = (current_position[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa14dee094aab682b8da5d7b72ee0d70c8">kCentroidY</a>] - <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a30f0d3aa61f2ee048dfdddefbe8e2d5d">previous_position_</a>[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa14dee094aab682b8da5d7b72ee0d70c8">kCentroidY</a>]) /</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>      time_difference;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    velocity[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0facfb2abd18c5d782f66e969cd3f15fa72">kCentroidZ</a>] = (current_position[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0facfb2abd18c5d782f66e969cd3f15fa72">kCentroidZ</a>] - <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a30f0d3aa61f2ee048dfdddefbe8e2d5d">previous_position_</a>[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0facfb2abd18c5d782f66e969cd3f15fa72">kCentroidZ</a>]) /</div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>      time_difference;</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    geometry_msgs::msg::Vector3 velocity_msg;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    velocity_msg.x = velocity[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa6e984a9901ecd8d15182651fdb407e46">kCentroidX</a>];</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>    velocity_msg.y = velocity[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa14dee094aab682b8da5d7b72ee0d70c8">kCentroidY</a>];</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    velocity_msg.z = velocity[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0facfb2abd18c5d782f66e969cd3f15fa72">kCentroidZ</a>];</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a7bdd1f0524f719f2b691defd6f991a62">velocity_publisher_</a>-&gt;publish(velocity_msg);</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>  }</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>  <span class="keywordflow">return</span> velocity;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>}</div>
</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span> </div>
<div class="foldopen" id="foldopen00162" data-start="{" data-end="}">
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno"><a class="line" href="classpointcloud__motion__capture_1_1MotionCapture.html#acf3041877a30d1926830ab3c0c0a4875">  162</a></span><span class="keywordtype">void</span> <a class="code hl_function" href="classpointcloud__motion__capture_1_1MotionCapture.html#acf3041877a30d1926830ab3c0c0a4875">MotionCapture::publishAcceleration</a>(<span class="keyword">const</span> Eigen::Vector3f &amp; current_velocity)</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>{</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  rclcpp::Time current_time = this-&gt;now();</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>  <span class="keywordtype">double</span> time_difference = (current_time - <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#ae1b2597b648f74b8ba479fc43eac5619">previous_velocity_time_</a>).seconds();</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>  Eigen::Vector3f acceleration = Eigen::Vector3f::Zero();</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span> </div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>  <span class="keywordflow">if</span> (time_difference &gt; 0) {</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>    acceleration[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daadfcfdd7f634f368a2f454bfd9e04b8a1">kVectorX</a>] = (current_velocity[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daadfcfdd7f634f368a2f454bfd9e04b8a1">kVectorX</a>] - <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#aa278fcef6c0df48537f17a391d9afe98">previous_velocity_</a>[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daadfcfdd7f634f368a2f454bfd9e04b8a1">kVectorX</a>]) /</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>      time_difference;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    acceleration[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daa601cabeb475a7d549627afd5eba1ff84">kVectorY</a>] = (current_velocity[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daa601cabeb475a7d549627afd5eba1ff84">kVectorY</a>] - <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#aa278fcef6c0df48537f17a391d9afe98">previous_velocity_</a>[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daa601cabeb475a7d549627afd5eba1ff84">kVectorY</a>]) /</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>      time_difference;</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    acceleration[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daa53f49b41fe7300374fcac49561af4b44">kVectorZ</a>] = (current_velocity[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daa53f49b41fe7300374fcac49561af4b44">kVectorZ</a>] - <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#aa278fcef6c0df48537f17a391d9afe98">previous_velocity_</a>[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daa53f49b41fe7300374fcac49561af4b44">kVectorZ</a>]) /</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>      time_difference;</div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span> </div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    geometry_msgs::msg::Vector3 acceleration_msg;</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>    acceleration_msg.x = acceleration[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daadfcfdd7f634f368a2f454bfd9e04b8a1">kVectorX</a>];</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    acceleration_msg.y = acceleration[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daa601cabeb475a7d549627afd5eba1ff84">kVectorY</a>];</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    acceleration_msg.z = acceleration[<a class="code hl_enumvalue" href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daa53f49b41fe7300374fcac49561af4b44">kVectorZ</a>];</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>    <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#a0a914ca05320a147adaa0f94b618ad85">acceleration_publisher_</a>-&gt;publish(acceleration_msg);</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>  }</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span> </div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#aa278fcef6c0df48537f17a391d9afe98">previous_velocity_</a> = current_velocity;</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>  <a class="code hl_variable" href="classpointcloud__motion__capture_1_1MotionCapture.html#ae1b2597b648f74b8ba479fc43eac5619">previous_velocity_time_</a> = current_time;</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>}</div>
</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span> </div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>}  <span class="comment">// namespace pointcloud_motion_capture</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="foldopen" id="foldopen00190" data-start="{" data-end="}">
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno"><a class="line" href="motion__capture_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">  190</a></span><span class="keywordtype">int</span> <a class="code hl_function" href="motion__capture_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> ** argv)</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>{</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>  rclcpp::init(argc, argv);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>  rclcpp::spin(std::make_shared&lt;pointcloud_motion_capture::MotionCapture&gt;());</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>  rclcpp::shutdown();</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>}</div>
</div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a0a914ca05320a147adaa0f94b618ad85"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a0a914ca05320a147adaa0f94b618ad85">pointcloud_motion_capture::MotionCapture::acceleration_publisher_</a></div><div class="ttdeci">rclcpp::Publisher&lt; geometry_msgs::msg::Vector3 &gt;::SharedPtr acceleration_publisher_</div><div class="ttdoc">ROS2 publisher to send the calculated object acceleration.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00282">motion_capture.hpp:282</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a12102cd89de99db1d934556e746e6b0fa14dee094aab682b8da5d7b72ee0d70c8"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa14dee094aab682b8da5d7b72ee0d70c8">pointcloud_motion_capture::MotionCapture::kCentroidY</a></div><div class="ttdeci">@ kCentroidY</div><div class="ttdoc">Index for the Y-coordinate of the centroid.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00035">motion_capture.hpp:35</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a12102cd89de99db1d934556e746e6b0fa6e984a9901ecd8d15182651fdb407e46"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0fa6e984a9901ecd8d15182651fdb407e46">pointcloud_motion_capture::MotionCapture::kCentroidX</a></div><div class="ttdeci">@ kCentroidX</div><div class="ttdoc">Index for the X-coordinate of the centroid.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00034">motion_capture.hpp:34</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a12102cd89de99db1d934556e746e6b0facfb2abd18c5d782f66e969cd3f15fa72"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a12102cd89de99db1d934556e746e6b0facfb2abd18c5d782f66e969cd3f15fa72">pointcloud_motion_capture::MotionCapture::kCentroidZ</a></div><div class="ttdeci">@ kCentroidZ</div><div class="ttdoc">Index for the Z-coordinate of the centroid.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00037">motion_capture.hpp:36</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a15fd3009fde1a138b8a91025599d4afe"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a15fd3009fde1a138b8a91025599d4afe">pointcloud_motion_capture::MotionCapture::publishData</a></div><div class="ttdeci">void publishData()</div><div class="ttdoc">Publishes the calculated position, velocity, and acceleration.</div><div class="ttdef"><b>Definition</b> <a href="#l00108">motion_capture.cpp:108</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a2685af73193d4a59c9680c78fc7fb04b"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a2685af73193d4a59c9680c78fc7fb04b">pointcloud_motion_capture::MotionCapture::kDefaultPublishRate</a></div><div class="ttdeci">double kDefaultPublishRate</div><div class="ttdoc">Default publish rate in Hz for publishing position, velocity, and acceleration.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00110">motion_capture.hpp:110</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a289fc6441569350a18ab9f523e390d14"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a289fc6441569350a18ab9f523e390d14">pointcloud_motion_capture::MotionCapture::kDefaultQueueSize</a></div><div class="ttdeci">int kDefaultQueueSize</div><div class="ttdoc">Default queue size for ROS publishers and subscriptions.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00119">motion_capture.hpp:119</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a30075cd00e1c61ba5fc1f96fd6819dcf"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a30075cd00e1c61ba5fc1f96fd6819dcf">pointcloud_motion_capture::MotionCapture::getFilteredPosition</a></div><div class="ttdeci">Eigen::Vector4f getFilteredPosition()</div><div class="ttdoc">Retrieves the filtered position of the object.</div><div class="ttdef"><b>Definition</b> <a href="#l00078">motion_capture.cpp:78</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a3033ceff8084ff3dea41ee04ced981daa53f49b41fe7300374fcac49561af4b44"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daa53f49b41fe7300374fcac49561af4b44">pointcloud_motion_capture::MotionCapture::kVectorZ</a></div><div class="ttdeci">@ kVectorZ</div><div class="ttdoc">Index for the Z-component of the velocity vector.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00051">motion_capture.hpp:50</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a3033ceff8084ff3dea41ee04ced981daa601cabeb475a7d549627afd5eba1ff84"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daa601cabeb475a7d549627afd5eba1ff84">pointcloud_motion_capture::MotionCapture::kVectorY</a></div><div class="ttdeci">@ kVectorY</div><div class="ttdoc">Index for the Y-component of the velocity vector.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00049">motion_capture.hpp:49</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a3033ceff8084ff3dea41ee04ced981daadfcfdd7f634f368a2f454bfd9e04b8a1"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a3033ceff8084ff3dea41ee04ced981daadfcfdd7f634f368a2f454bfd9e04b8a1">pointcloud_motion_capture::MotionCapture::kVectorX</a></div><div class="ttdeci">@ kVectorX</div><div class="ttdoc">Index for the X-component of the velocity vector.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00048">motion_capture.hpp:48</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a3039930579e2cccb2b12f0a2abab7dd4"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a3039930579e2cccb2b12f0a2abab7dd4">pointcloud_motion_capture::MotionCapture::kDefaultPointCloudTopicFiltered</a></div><div class="ttdeci">std::string kDefaultPointCloudTopicFiltered</div><div class="ttdoc">Default topic name for subscribing to the filtered point cloud data.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00060">motion_capture.hpp:60</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a30f0d3aa61f2ee048dfdddefbe8e2d5d"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a30f0d3aa61f2ee048dfdddefbe8e2d5d">pointcloud_motion_capture::MotionCapture::previous_position_</a></div><div class="ttdeci">Eigen::Vector4f previous_position_</div><div class="ttdoc">The previous position of the object in 3D space.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00309">motion_capture.hpp:309</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a334bd4d37cca9734ed03556a954db329"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a334bd4d37cca9734ed03556a954db329">pointcloud_motion_capture::MotionCapture::updatePositionSamples</a></div><div class="ttdeci">void updatePositionSamples(const Eigen::Vector4f &amp;centroid)</div><div class="ttdoc">Updates the position samples queue with a new centroid value.</div><div class="ttdef"><b>Definition</b> <a href="#l00070">motion_capture.cpp:70</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a34021deb2f89da260e041ceeaefbd351"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a34021deb2f89da260e041ceeaefbd351">pointcloud_motion_capture::MotionCapture::acceleration_publish_topic_</a></div><div class="ttdeci">std::string acceleration_publish_topic_</div><div class="ttdoc">Topic name for publishing the calculated acceleration of an object.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00410">motion_capture.hpp:410</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a3e0e82805977a578a2bea53288f5b090"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a3e0e82805977a578a2bea53288f5b090">pointcloud_motion_capture::MotionCapture::loadParameters</a></div><div class="ttdeci">void loadParameters()</div><div class="ttdoc">Loads parameters from the ROS2 parameter server.</div><div class="ttdef"><b>Definition</b> <a href="#l00035">motion_capture.cpp:35</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a438497c4ec863c366bd036b14a088796"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a438497c4ec863c366bd036b14a088796">pointcloud_motion_capture::MotionCapture::previous_time_</a></div><div class="ttdeci">rclcpp::Time previous_time_</div><div class="ttdoc">The timestamp of the previous position sample.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00326">motion_capture.hpp:326</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a438d48c23be783174910509035222d58"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a438d48c23be783174910509035222d58">pointcloud_motion_capture::MotionCapture::position_queue_</a></div><div class="ttdeci">std::queue&lt; Eigen::Vector4f &gt; position_queue_</div><div class="ttdoc">Queue to store recent position samples for calculating position.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00292">motion_capture.hpp:292</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a4608c26b091de86a8fefb2533901b123"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a4608c26b091de86a8fefb2533901b123">pointcloud_motion_capture::MotionCapture::kDefaultPositionSamples</a></div><div class="ttdeci">int kDefaultPositionSamples</div><div class="ttdoc">Default number of position samples used for calculations.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00093">motion_capture.hpp:93</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a4bc83af20b6877a846c1f47c884ff93c"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a4bc83af20b6877a846c1f47c884ff93c">pointcloud_motion_capture::MotionCapture::publishVelocity</a></div><div class="ttdeci">Eigen::Vector3f publishVelocity(const Eigen::Vector4f &amp;current_position)</div><div class="ttdoc">Publishes the object's velocity to a ROS topic.</div><div class="ttdef"><b>Definition</b> <a href="#l00137">motion_capture.cpp:137</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a57223726dc7083da222481f61b37c67e"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a57223726dc7083da222481f61b37c67e">pointcloud_motion_capture::MotionCapture::kDefaultAccelerationPublishTopic</a></div><div class="ttdeci">std::string kDefaultAccelerationPublishTopic</div><div class="ttdoc">Default topic name for publishing the calculated object acceleration.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00084">motion_capture.hpp:84</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a58eb72dd9ed496d2db4ecf12102cf3cc"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a58eb72dd9ed496d2db4ecf12102cf3cc">pointcloud_motion_capture::MotionCapture::velocity_queue_</a></div><div class="ttdeci">std::queue&lt; Eigen::Vector3f &gt; velocity_queue_</div><div class="ttdoc">Queue to store recent velocity samples for calculating velocity.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00301">motion_capture.hpp:301</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a5adde86119e6d10e0c0a7f7eb9e05972"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a5adde86119e6d10e0c0a7f7eb9e05972">pointcloud_motion_capture::MotionCapture::kDefaultVelocitySamples</a></div><div class="ttdeci">int kDefaultVelocitySamples</div><div class="ttdoc">Default number of velocity samples used for calculations.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00102">motion_capture.hpp:102</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a667866c7b1c0a80114ae91ed570137e7"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a667866c7b1c0a80114ae91ed570137e7">pointcloud_motion_capture::MotionCapture::getFilteredVelocity</a></div><div class="ttdeci">Eigen::Vector3f getFilteredVelocity()</div><div class="ttdoc">Retrieves the filtered velocity of the object.</div><div class="ttdef"><b>Definition</b> <a href="#l00097">motion_capture.cpp:97</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a6f32acfa4286aed5ec45f34d34a76dbb"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a6f32acfa4286aed5ec45f34d34a76dbb">pointcloud_motion_capture::MotionCapture::velocity_samples_</a></div><div class="ttdeci">int velocity_samples_</div><div class="ttdoc">Number of velocity samples used for calculations.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00351">motion_capture.hpp:351</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a6f6f28c357e7fe079ae84589a05b41f0"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a6f6f28c357e7fe079ae84589a05b41f0">pointcloud_motion_capture::MotionCapture::kDefaultPositionPublishTopic</a></div><div class="ttdeci">std::string kDefaultPositionPublishTopic</div><div class="ttdoc">Default topic name for publishing the calculated object position.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00068">motion_capture.hpp:68</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a74a3e808b2f3c778be89d8a65f142ecd"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a74a3e808b2f3c778be89d8a65f142ecd">pointcloud_motion_capture::MotionCapture::position_samples_</a></div><div class="ttdeci">int position_samples_</div><div class="ttdoc">Number of position samples used for calculations.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00343">motion_capture.hpp:343</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a7bdd1f0524f719f2b691defd6f991a62"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a7bdd1f0524f719f2b691defd6f991a62">pointcloud_motion_capture::MotionCapture::velocity_publisher_</a></div><div class="ttdeci">rclcpp::Publisher&lt; geometry_msgs::msg::Vector3 &gt;::SharedPtr velocity_publisher_</div><div class="ttdoc">ROS2 publisher to send the calculated object velocity.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00273">motion_capture.hpp:273</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a83587013c54be37ae783180721f0dd5d"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a83587013c54be37ae783180721f0dd5d">pointcloud_motion_capture::MotionCapture::point_cloud_topic_filtered_</a></div><div class="ttdeci">std::string point_cloud_topic_filtered_</div><div class="ttdoc">Topic name for subscribing to filtered point cloud data.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00386">motion_capture.hpp:386</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a8f0c9d738a031e76171294b2135495f9"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a8f0c9d738a031e76171294b2135495f9">pointcloud_motion_capture::MotionCapture::kMillisecondsPerSecond</a></div><div class="ttdeci">double kMillisecondsPerSecond</div><div class="ttdoc">Conversion factor from seconds to milliseconds.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00128">motion_capture.hpp:128</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a965bf294d864a6f52279de513dfbde89"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a965bf294d864a6f52279de513dfbde89">pointcloud_motion_capture::MotionCapture::kDefaultVelocityPublishTopic</a></div><div class="ttdeci">std::string kDefaultVelocityPublishTopic</div><div class="ttdoc">Default topic name for publishing the calculated object velocity.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00076">motion_capture.hpp:76</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a9b7ffa90ac8882c566dd9c521b2b1070"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a9b7ffa90ac8882c566dd9c521b2b1070">pointcloud_motion_capture::MotionCapture::MotionCapture</a></div><div class="ttdeci">MotionCapture()</div><div class="ttdoc">Constructor for the MotionCapture class.</div><div class="ttdef"><b>Definition</b> <a href="#l00007">motion_capture.cpp:7</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_a9d9bc3768aabdbdeb780a633fff1cb9f"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#a9d9bc3768aabdbdeb780a633fff1cb9f">pointcloud_motion_capture::MotionCapture::queue_size_</a></div><div class="ttdeci">int queue_size_</div><div class="ttdoc">Queue size for message publishers and subscriptions.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00359">motion_capture.hpp:359</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_aa156ae74a1cb0a67619d053bfda6c5f4"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#aa156ae74a1cb0a67619d053bfda6c5f4">pointcloud_motion_capture::MotionCapture::timer_</a></div><div class="ttdeci">rclcpp::TimerBase::SharedPtr timer_</div><div class="ttdoc">Timer used for scheduling the publication of data.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00377">motion_capture.hpp:377</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_aa278fcef6c0df48537f17a391d9afe98"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#aa278fcef6c0df48537f17a391d9afe98">pointcloud_motion_capture::MotionCapture::previous_velocity_</a></div><div class="ttdeci">Eigen::Vector3f previous_velocity_</div><div class="ttdoc">The previous velocity of the object in 3D space.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00317">motion_capture.hpp:317</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_aab8b9ff1f06f0e30501b18443cf94855"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#aab8b9ff1f06f0e30501b18443cf94855">pointcloud_motion_capture::MotionCapture::subscription_</a></div><div class="ttdeci">rclcpp::Subscription&lt; sensor_msgs::msg::PointCloud2 &gt;::SharedPtr subscription_</div><div class="ttdoc">ROS2 subscription to receive PointCloud2 messages.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00255">motion_capture.hpp:255</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_ac109216a317d096c5dd2d389eef92acd"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#ac109216a317d096c5dd2d389eef92acd">pointcloud_motion_capture::MotionCapture::pointCloudCallback</a></div><div class="ttdeci">void pointCloudCallback(const sensor_msgs::msg::PointCloud2::SharedPtr msg)</div><div class="ttdoc">Callback function for processing incoming PointCloud2 messages.</div><div class="ttdef"><b>Definition</b> <a href="#l00059">motion_capture.cpp:59</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_ac2e4ce6f0eca5b0cd98b2c93626eb5aa"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#ac2e4ce6f0eca5b0cd98b2c93626eb5aa">pointcloud_motion_capture::MotionCapture::publishPosition</a></div><div class="ttdeci">void publishPosition(const Eigen::Vector4f &amp;centroid)</div><div class="ttdoc">Publishes the object's position to a ROS topic.</div><div class="ttdef"><b>Definition</b> <a href="#l00127">motion_capture.cpp:127</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_acaa6339a9724ea4388a727b4eb781cc4"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#acaa6339a9724ea4388a727b4eb781cc4">pointcloud_motion_capture::MotionCapture::updateVelocitySamples</a></div><div class="ttdeci">void updateVelocitySamples(const Eigen::Vector3f &amp;velocity)</div><div class="ttdoc">Updates the velocity samples queue with a new velocity value.</div><div class="ttdef"><b>Definition</b> <a href="#l00089">motion_capture.cpp:89</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_acf3041877a30d1926830ab3c0c0a4875"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#acf3041877a30d1926830ab3c0c0a4875">pointcloud_motion_capture::MotionCapture::publishAcceleration</a></div><div class="ttdeci">void publishAcceleration(const Eigen::Vector3f &amp;current_velocity)</div><div class="ttdoc">Publishes the object's acceleration to a ROS topic.</div><div class="ttdef"><b>Definition</b> <a href="#l00162">motion_capture.cpp:162</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_ad4a80fc0fb35c65ea8007a03c0f4436f"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#ad4a80fc0fb35c65ea8007a03c0f4436f">pointcloud_motion_capture::MotionCapture::velocity_publish_topic_</a></div><div class="ttdeci">std::string velocity_publish_topic_</div><div class="ttdoc">Topic name for publishing the calculated velocity of an object.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00402">motion_capture.hpp:402</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_addbe00e8824bbd08761ca68fc5aac006"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#addbe00e8824bbd08761ca68fc5aac006">pointcloud_motion_capture::MotionCapture::position_publisher_</a></div><div class="ttdeci">rclcpp::Publisher&lt; geometry_msgs::msg::Point &gt;::SharedPtr position_publisher_</div><div class="ttdoc">ROS2 publisher to send the calculated object position.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00264">motion_capture.hpp:264</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_ae1b2597b648f74b8ba479fc43eac5619"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#ae1b2597b648f74b8ba479fc43eac5619">pointcloud_motion_capture::MotionCapture::previous_velocity_time_</a></div><div class="ttdeci">rclcpp::Time previous_velocity_time_</div><div class="ttdoc">The timestamp of the previous velocity sample.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00335">motion_capture.hpp:335</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_afa859cac2d5662a15854e39dd71daa31"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#afa859cac2d5662a15854e39dd71daa31">pointcloud_motion_capture::MotionCapture::position_publish_topic_</a></div><div class="ttdeci">std::string position_publish_topic_</div><div class="ttdoc">Topic name for publishing the calculated position of an object.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00394">motion_capture.hpp:394</a></div></div>
<div class="ttc" id="aclasspointcloud__motion__capture_1_1MotionCapture_html_afac01981dea1d1d977ff43c79d578256"><div class="ttname"><a href="classpointcloud__motion__capture_1_1MotionCapture.html#afac01981dea1d1d977ff43c79d578256">pointcloud_motion_capture::MotionCapture::publish_rate_</a></div><div class="ttdeci">double publish_rate_</div><div class="ttdoc">Publish rate for sending position, velocity, and acceleration data.</div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00368">motion_capture.hpp:368</a></div></div>
<div class="ttc" id="amotion__capture_8cpp_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="motion__capture_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition</b> <a href="#l00190">motion_capture.cpp:190</a></div></div>
<div class="ttc" id="amotion__capture_8hpp_html"><div class="ttname"><a href="motion__capture_8hpp.html">motion_capture.hpp</a></div></div>
<div class="ttc" id="anamespacepointcloud__motion__capture_html"><div class="ttname"><a href="namespacepointcloud__motion__capture.html">pointcloud_motion_capture</a></div><div class="ttdef"><b>Definition</b> <a href="motion__capture_8hpp_source.html#l00020">motion_capture.hpp:21</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
